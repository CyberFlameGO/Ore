@*
Page used for uploading and creating new projects.
*@
@import controllers.sugar.Requests.OreRequest
@import models.user.Organization
@import ore.OreConfig
@import views.html.helper.{CSRF, form}

@(pgpStatus: (Boolean, String), author: String, slug: String)(implicit messages: Messages, flash: Flash, request: OreRequest[_], config: OreConfig)
@projects.versions.creation.template(messages("version.create"), 1) {
    <script type="text/javascript" src="@routes.Assets.versioned("javascripts/versionCreationUpload.js")"></script>

    @form(action = controllers.project.routes.VersionCreation.processStep1(author, slug), 'enctype -> "multipart/form-data", 'id -> "form-upload", 'id -> "uploadFileForm") {
        @CSRF.formField

        @* PGP Check: is not valid *@
        @if(!pgpStatus._1) {
            <div class="alert alert-danger">@messages(pgpStatus._2)</div>
        } else {
            <div class="alert alert-danger alert-dismissible fade show upload-step1-error" role="alert" style="display:none;">
                <span class="upload-step1-error-message"></span>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close" onclick="$('.upload-step1-error').hide();">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="upload-container">
                <div class="alert alert-info alert-dismissible">
                    <ul class="nav justify-content-start">
                        <li class="nav-item">
                            <a class="nav-link" href="#" style="padding: 0 1rem 0 0;">
                                <label class="upload-file-btn btn btn-primary btn-sm">
                                    <input class="upload-file-input d-none" type="file">
                                    <i class="fas fa-file-medical"></i>
                                    Select plugin file
                                </label>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" style="padding: 0 1rem 0 0;">
                                <label class="upload-signature-btn btn btn-secondary btn-sm">
                                    <input class="upload-signature-input d-none" type="file">
                                    <i class="fas fa-file-signature"></i>
                                    Select signature file
                                </label>
                            </a>
                        </li>
                    </ul>

                    <span class="upload-step1-file-icon"></span>
                    <span class="upload-step1-file-message"></span>
                    <br>
                    <span class="upload-step1-sig-icon"></span>
                    <span class="upload-step1-sig-message"></span>

                    <button type="button" class="close" data-dismiss="alert" aria-label="Close" onclick="$('.upload-step1-error').hide();">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>

            <ul class="nav justify-content-end mt-3">
                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <label class="btn btn-secondary" id="addAnotherVersion">
                            <i class="fas fa-file-medical"></i>
                            Add another version
                        </label>
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#">
                        <label class="btn btn-secondary" id="uploadFinishBtn">
                            <i class="fas fa-file-upload"></i>
                            Upload & configure
                        </label>
                    </a>
                </li>
            </ul>
        }
    }
}
