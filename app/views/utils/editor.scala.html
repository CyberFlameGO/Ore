@import views.html.helper.{CSRF, form}
@import models.project.Page
@import security.NonceFilter._

@(saveCall: Call = null,
        deleteCall: Call = null,
        savable: Boolean = true,
        deletable: Boolean = false,
        enabled: Boolean,
        raw: String = "",
        cooked: Html = Html(""),
        subject: String = null,
        cancellable: Boolean = true,
        targetForm: String = null,
        extraFormValue: String = null)(implicit messages: Messages, request: Request[_])

@if(enabled) {
    <div class="col-12">
        <ul class="nav justify-content-center bg-light border border-bottom-0">

            <li class="nav-item">
                <a class="nav-link btn-edit btn-page text-dark" href="#">
                    <i class="fas fa-edit"></i> @messages("general.edit")
                </a>
            </li>

            <li class="nav-item btn-edit-container btn-preview-container">
                <a class="nav-link btn-preview btn-page text-dark" href="#">
                    <i class="fas fa-eye"></i> @messages("general.preview")
                </a>
            </li>

            @if(savable) {
                <li class="nav-item btn-edit-container btn-save-container">
                    <a class="nav-link btn-save btn-page text-dark" href="#">
                        <i class="fas fa-save"></i> @messages("general.save")
                    </a>
                </li>
            }

            @if(cancellable) {
                <li class="nav-item btn-edit-container btn-save-container">
                    <a class="nav-link btn-cancel btn-page text-dark" href="#">
                        <i class="fas fa-times"></i> @messages("general.cancel")
                    </a>
                </li>
            }

            @if(deletable) {
                <li class="nav-item btn-edit-container btn-delete-container">
                    <a class="nav-link btn-cancel btn-page text-dark" href="#" data-toggle="modal" data-target="#modal-page-delete">
                        <i class="fas fa-trash"></i> @messages("general.delete")
                    </a>
                </li>

                <div class="modal fade" id="modal-page-delete" tabindex="-1" role="dialog" aria-labelledby="label-page-delete">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title" id="label-page-delete">Delete @subject.toLowerCase</h4>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                Are you sure you want to delete this @subject.toLowerCase? This cannot be undone.
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                @form(action = deleteCall, 'class -> "form-inline") {
                                    @CSRF.formField
                                    <button type="submit" class="btn btn-danger">Delete</button>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }

            @if(savable) {
                @form(action = saveCall, 'id -> "form-editor-save") {
                    @CSRF.formField
                    @if(extraFormValue != null) {
                        <input type="hidden" value="@extraFormValue" name="name">
                        }
                }
            }
        </ul>
    </div>
}
<div class="col-12 page-view">
    <div class="page-content page-rendered">@cooked</div>

        <!-- Edit window -->
    <div class="page-edit" style="display: none ;">
        <textarea name="content" class="form-control" @if(targetForm != null) {
            form="@targetForm"
        } else {
            form="form-editor-save"
            }>@raw</textarea>
    </div>

        <!-- Preview window -->
    <div class="page-preview page-rendered" style="display: none;"></div>
</div>
